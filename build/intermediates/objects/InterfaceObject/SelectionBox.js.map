{"version":3,"sources":["../../../../game/objects/InterfaceObject/SelectionBox.js"],"names":["THREE","require","InterfaceObject","SelectionBox","geometry","BoxGeometry","material","MeshLambertMaterial","color","transparent","opacity","name","type","coords","startCoordinates","position","set","x","size","y","z","Vector3","oldGeometry","setSize","Math","min","currentCoords","boundingBox","Box3","setFromObject","max","cubes","window","game","cubesInBox","undefined","bottomLeft","Vector2","topRight","i","push","module","exports"],"mappings":"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","file":"SelectionBox.js","sourcesContent":["/*\njshint\nnode: true,\nesversion: 6,\nbrowser: true\n*/\n\nconst THREE = require('three');\nconst InterfaceObject = require('./InterfaceObject.js');\n\nclass SelectionBox extends InterfaceObject {\n  constructor() {\n    let geometry = new THREE.BoxGeometry(0, 0, 0);\n    let material = new THREE.MeshLambertMaterial({\n      color: 0xCCCC00,\n      transparent: true,\n      opacity: 0.5\n    });\n\n    super(geometry, material);\n    this.name = \"selectionBox\";\n    this.type = \"interface\";\n  }\n\n  startCoordinates(coords) {\n    this.startCoordinates = coords;\n    this.position.set(\n      coords.x + this.size.x/2,\n      coords.y + this.size.y/2,\n      this.size.z/2\n    );\n  }\n\n  continueCoordinates(coords = new THREE.Vector3(0, 0, 0)) {\n    if(coords !== null) {\n      let oldGeometry = this.geometry;\n\n      this.geometry = new THREE.BoxGeometry(\n        (this.startCoordinates.x - coords.x),\n        (this.startCoordinates.y - coords.y),\n        this.size.z\n      );\n\n      this.setSize();\n\n      this.position.set(\n        Math.min(this.startCoordinates.x, coords.x) + this.size.x/2,\n        Math.min(this.startCoordinates.y, coords.y) + this.size.y/2,\n        this.size.z/2\n      );\n\n      this.currentCoords = coords;\n    }\n  }\n\n  setSize() {\n    this.boundingBox = new THREE.Box3().setFromObject(this);\n    this.size.x = this.boundingBox.max.x - this.boundingBox.min.x;\n    this.size.y = this.boundingBox.max.y - this.boundingBox.min.y;\n    this.size.z = this.boundingBox.max.z - this.boundingBox.min.z;\n  }\n\n  getCubesInBox() {\n    let cubes = window.game.cubes;\n    let cubesInBox = [];\n\n    if(this.currentCoords !== undefined) {\n      // determine bottom left (minX, minY)\n      let bottomLeft = new THREE.Vector2(\n        Math.min(this.startCoordinates.x, this.currentCoords.x),\n        Math.min(this.startCoordinates.y, this.currentCoords.y)\n      );\n\n      // determine top right (maxX, maxY)\n      let topRight = new THREE.Vector2(\n        Math.max(this.startCoordinates.x, this.currentCoords.x),\n        Math.max(this.startCoordinates.y, this.currentCoords.y)\n      );\n\n      for(let i in cubes) {\n        if(\n          cubes[i].position.x > bottomLeft.x &&\n          cubes[i].position.x < topRight.x &&\n          cubes[i].position.y > bottomLeft.y &&\n          cubes[i].position.y < topRight.y\n        ) {\n          // add to selection\n          cubesInBox.push(cubes[i]);\n        }\n      }\n\n    }\n\n    return cubesInBox;\n  }\n}\n\nmodule.exports = SelectionBox;\n"]}